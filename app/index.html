<!DOCTYPE html>
<!--[if lte IE 6 ]> <html class="ie ie6 lte_ie7 lte_ie8" lang="zh-CN"> <![endif]-->
<!--[if IE 7 ]> <html class="ie ie7 lte_ie7 lte_ie8" lang="zh-CN"> <![endif]-->
<!--[if IE 8 ]> <html class="ie ie8 lte_ie8" lang="zh-CN"> <![endif]-->
<!--[if IE 9 ]> <html class="ie ie9" lang="zh-CN"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="zh-CN"> <!--<![endif]-->
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta name="author" content="avenirzheng" />
<meta http-equiv="Cache-Control" content="max-age=60" />
<meta name="description" content="Hello，Avenir生活在美丽的深圳，2010毕业加入腾讯，曾负责QQ会员、腾讯视频、搜搜等业务，目前任职CDC（用户研究与体验设计部）墨子工作室组长，主要负责内部基础系统建设及创新产品孵化。"/>
<meta name="keywords" content="前端开发,用户体验" />
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
<title>AVENIRZHENG - 从平凡到卓越</title>
<link rel="stylesheet" href="assets/css/style.css" type="text/css" media="screen" charset="utf-8">

<body>
	<header class="profile">
		<h1 class="name"><a href="/" data-text="Avenir">Avenir</a></h1>
	</header>
	
	<section class="info" id="info">
		 <p class="description">Hello，Avenir living in <a href="https://en.wikipedia.org/wiki/Shenzhen" target="_blank" class="link">Shenzhen</a>, a beautiful coastal city in China, as a Front-end Developer and Team Leader worked for <a href="http://www.tencent.com/en-us/index.shtml" target="_blank" class="link">Tencent</a> <a href="http://cdc.tencent.com/" target="_blank" class="link">CDC</a> since graduated from <a href="http://english.gdufs.edu.cn/" target="_blank" class="link">GDUFS</a> in 2010. Contact Avenir via
		
		 </p>
		 <nav class="contact">
			 
		 <dl>
			 <dt>WeChat:</dt>
			 <dd>
			 	<a href="#WeChatQRCode" title="WeChat" class="wechat">
				 	<svg viewBox="0 0 31.617 31.617"  aria-hidden="true">
<g><path d="M31.403,21.306c0-4.597-4.388-8.32-9.8-8.32c-5.414,0-9.802,3.725-9.802,8.32c0,4.597,4.388,8.322,9.802,8.322
			c1.701,0,3.302-0.369,4.697-1.019l3.863,1.671l-0.447-4.309C30.782,24.642,31.403,23.034,31.403,21.306z M18.301,19.052
			c-0.771,0-1.395-0.625-1.395-1.395s0.623-1.395,1.395-1.395c0.77,0,1.393,0.625,1.393,1.395S19.069,19.052,18.301,19.052z
			 M24.905,19.052c-0.769,0-1.394-0.625-1.394-1.395s0.625-1.395,1.394-1.395c0.771,0,1.396,0.625,1.396,1.395
			S25.676,19.052,24.905,19.052z"/>
		<path d="M21.604,11.885c1.515,0,2.957,0.27,4.271,0.755c0.009-0.175,0.03-0.345,0.03-0.521c0-6.074-5.801-10.996-12.953-10.996
			C5.799,1.123,0,6.044,0,12.119c0,2.284,0.822,4.408,2.229,6.167L1.638,23.98l5.104-2.213c1.264,0.59,2.661,0.986,4.136,1.189
			c-0.111-0.538-0.179-1.087-0.179-1.65C10.7,16.111,15.591,11.885,21.604,11.885z M17.317,5.457c1.017,0,1.84,0.824,1.84,1.84
			c0,1.018-0.823,1.842-1.84,1.842c-1.019,0-1.841-0.824-1.841-1.842C15.476,6.281,16.301,5.457,17.317,5.457z M8.586,9.139
			c-1.017,0-1.84-0.824-1.84-1.842c0-1.016,0.823-1.84,1.84-1.84c1.018,0,1.841,0.824,1.841,1.84
			C10.427,8.313,9.603,9.139,8.586,9.139z"/>
</g>
</svg>
				 	<span class="txt">avenir</span>
				 </a>
				
			 </dd>
			 <dt>QQ:</dt>
			 <dd>
			 	<a href="tencent://message/?uin=18900509" class="qq" title="QQ">
				 	<svg viewBox="0 0 31.617 31.617"  aria-hidden="true">
<g><path d="M25.694,13.182c0.268-0.915,0.416-1.88,0.416-2.881C26.11,4.612,21.5,0,15.81,0c-5.688,0-10.3,4.611-10.3,10.301
		c0,1.001,0.149,1.966,0.416,2.881c-1.297,1.042-6.331,5.557-4.26,11.412c0,0,1.752-0.15,3.191-2.811
		c0.437,1.703,1.251,3.25,2.361,4.543c-1.626,0.479-2.729,1.408-2.729,2.474c0,1.556,2.348,2.817,5.243,2.817
		c1.965,0,3.676-0.582,4.573-1.44c0.494,0.065,0.992,0.11,1.503,0.11c0.512,0,1.011-0.045,1.503-0.11
		c0.899,0.858,2.609,1.44,4.574,1.44c2.896,0,5.245-1.262,5.245-2.817c0-1.065-1.104-1.995-2.73-2.474
		c1.109-1.293,1.925-2.84,2.362-4.543c1.438,2.66,3.188,2.811,3.188,2.811C32.024,18.738,26.99,14.223,25.694,13.182z"/>
</g>
</svg>
	<span class="txt">18900509</span>
				</a>
			</dd>
			 <dt>email:</dt>
			 <dd>
			 	<a href="mailto:avenirzheng@gmail.com" class="mail" title="E-mail">
				 	<svg viewBox="0 0 31.617 31.617"  aria-hidden="true">
<g><path d="M1.286,12.465c-0.685,0.263-1.171,0.879-1.268,1.606c-0.096,0.728,0.213,1.449,0.806,1.88l6.492,4.724L30.374,2.534
			L9.985,22.621l8.875,6.458c0.564,0.41,1.293,0.533,1.964,0.33c0.67-0.204,1.204-0.713,1.444-1.368l9.494-25.986
			c0.096-0.264,0.028-0.559-0.172-0.756c-0.199-0.197-0.494-0.259-0.758-0.158L1.286,12.465z"/>
		<path d="M5.774,22.246l0.055,0.301l1.26,6.889c0.094,0.512,0.436,0.941,0.912,1.148c0.476,0.206,1.025,0.162,1.461-0.119
			c1.755-1.132,4.047-2.634,3.985-2.722L5.774,22.246z"/>
</g>
</svg>
				 	<span class="txt">avenirzheng[at]gmail.com</span>
				 </a>
			 </dd>
		 </dl>
		</nav>
		<p>
			Connecting with:
		</p>
		<nav class="society">
			<dl>
				
				
				<dt>weibo</dt>
				<dd>
					<a href="http://weibo.com/avenirzheng/" target="_blank" title="Weibo" class="weibo">
						<svg aria-hidden="true" viewBox="0 0 94 94">
<g>
	<g>
		<path d="M40.896,56.609c-0.762-0.303-1.719,0.062-2.162,0.812c-0.434,0.754-0.195,1.612,0.568,1.928
			c0.775,0.318,1.768-0.051,2.217-0.818C41.947,57.762,41.67,56.895,40.896,56.609z"/>
		<path d="M36.002,58.639c-1.986-0.832-4.551,0.025-5.777,1.947c-1.24,1.928-0.658,4.229,1.313,5.123
			c2.002,0.914,4.656,0.046,5.896-1.932C38.652,61.775,38.008,59.496,36.002,58.639z"/>
		<path d="M89,0H5C2.238,0,0,2.238,0,5v84c0,2.762,2.238,5,5,5h84c2.762,0,5-2.238,5-5V5C94,2.238,91.762,0,89,0z M40.77,78.368
			c-16.07,0-32.494-7.784-32.494-20.597c0-6.692,4.242-14.438,11.547-21.744c9.758-9.752,21.135-14.193,25.41-9.914
			c1.889,1.885,2.07,5.152,0.857,9.05c-0.633,1.965,1.844,0.879,1.844,0.881c7.885-3.301,14.765-3.495,17.279,0.097
			c1.34,1.914,1.213,4.6-0.023,7.712c-0.571,1.434,0.179,1.654,1.269,1.981c4.442,1.378,9.388,4.708,9.388,10.578
			C75.844,66.131,61.834,78.368,40.77,78.368z M69.855,37.646c0.521-1.606,0.194-3.436-1.019-4.779
			c-1.209-1.341-2.998-1.851-4.646-1.501v-0.003c-1.375,0.301-2.732-0.584-3.027-1.957c-0.297-1.381,0.584-2.739,1.963-3.032
			c3.373-0.718,7.029,0.327,9.504,3.07c2.482,2.749,3.145,6.486,2.084,9.771c-0.434,1.342-1.871,2.077-3.213,1.646
			c-1.342-0.435-2.076-1.876-1.643-3.214L69.855,37.646L69.855,37.646z M84.732,42.449c0,0.004,0,0.01,0,0.012
			c-0.506,1.555-2.176,2.408-3.734,1.904c-1.562-0.505-2.416-2.174-1.91-3.735c1.547-4.791,0.566-10.254-3.047-14.259
			c-3.619-4.005-8.949-5.537-13.875-4.489c-1.602,0.342-3.178-0.682-3.52-2.28c-0.347-1.604,0.68-3.181,2.278-3.52h0.005
			c6.926-1.473,14.428,0.677,19.512,6.313C85.531,28.03,86.904,35.71,84.732,42.449z"/>
		<path d="M37.799,43.295c-12.818,1.27-22.543,9.121-21.711,17.535c0.836,8.42,11.902,14.213,24.723,12.949
			c12.822-1.268,22.539-9.121,21.71-17.541C61.689,47.824,50.621,42.026,37.799,43.295z M49.049,63.148
			c-2.615,5.916-10.145,9.074-16.529,7.016c-6.164-1.991-8.771-8.079-6.072-13.562c2.648-5.375,9.545-8.414,15.646-6.828
			C48.406,51.404,51.629,57.364,49.049,63.148z"/>
	</g>
</g>

</svg>

						<span class="txt">avenirzheng</span>
					</a>
				</dd>
				
				<dt>flickr</dt>
				<dd>
					<a href="http://www.flickr.com/people/avenirzheng/" target="_blank" title="Flickr" class="flickr">
						<svg aria-hidden="true" viewBox="0 0 94 94">
<g>
	<path d="M94,89c0,2.761-2.238,5-5,5H5c-2.762,0-5-2.239-5-5V5c0-2.761,2.238-5,5-5h84c2.762,0,5,2.239,5,5V89z M68.52,28.309
		c-9.781,0-17.711,8.269-17.711,18.468c0,10.202,7.93,18.469,17.711,18.469c9.78,0,17.711-8.268,17.711-18.469
		C86.229,36.578,78.3,28.309,68.52,28.309z M24.985,28.309c-9.508,0-17.215,8.369-17.215,18.692s7.707,18.69,17.215,18.69
		C34.491,65.691,42.2,57.323,42.2,47S34.491,28.309,24.985,28.309z"/>
</g>

</svg>

						<span class="txt">avenirzheng</span>
					</a>
				</dd>
				
				<dt>facebook</dt>
				<dd>
					<a href="https://www.facebook.com/avenirzheng" target="_blank" title="Facebook" class="facebook">
						<svg aria-hidden="true" viewBox="0 0 94 94">
<g>
	<path d="M89,0H5C2.239,0,0,2.239,0,5v84c0,2.761,2.239,5,5,5h84c2.762,0,5-2.239,5-5V5C94,2.239,91.762,0,89,0z M66.93,21.364
		l-7.226,0.003c-5.664,0-6.761,2.692-6.761,6.643v8.711h13.511L66.45,50.365H52.943v35.012H38.852V50.365H27.07V36.721h11.782
		V26.659c0-11.677,7.133-18.036,17.548-18.036L66.93,8.64V21.364z"/>
</g>

</svg>

						<span class="txt">avenir zheng</span>
					</a>
				</dd>
				
				
				
				<dt>twitter</dt>
				<dd>
					<a href="https://www.twitter.com/AvenirZheng" target="_blank" title="Twitter" class="twitter">
						<svg aria-hidden="true" viewBox="0 0 94 94">
<g>
	<path d="M89,0H5C2.239,0,0,2.239,0,5v84c0,2.761,2.239,5,5,5h84c2.762,0,5-2.239,5-5V5C94,2.239,91.762,0,89,0z M85.874,23.302
		c-2.122,3.177-4.752,5.922-7.817,8.164c0.024,0.616,0.036,1.233,0.036,1.855c0,22.315-16.979,45.396-45.396,45.396
		c-8.687,0-17.144-2.479-24.458-7.169c-0.152-0.097-0.217-0.286-0.155-0.456c0.061-0.169,0.234-0.273,0.409-0.254
		c1.229,0.146,2.482,0.219,3.729,0.219c6.758,0,13.156-2.089,18.567-6.053c-6.487-0.547-12.062-4.938-14.068-11.199
		c-0.041-0.131-0.011-0.271,0.08-0.375c0.09-0.103,0.229-0.146,0.362-0.123c1.797,0.342,3.624,0.362,5.387,0.078
		c-6.69-2.08-11.393-8.346-11.393-15.481l0.002-0.208c0.003-0.136,0.077-0.26,0.193-0.326c0.118-0.068,0.264-0.069,0.381-0.003
		c1.743,0.968,3.677,1.591,5.655,1.828c-3.844-3.064-6.102-7.709-6.102-12.678c0-2.867,0.76-5.686,2.194-8.148
		c0.064-0.109,0.178-0.182,0.305-0.19c0.127-0.013,0.25,0.042,0.329,0.142c7.87,9.651,19.444,15.595,31.821,16.358
		c-0.208-1.04-0.312-2.11-0.312-3.191c0-8.936,7.271-16.205,16.206-16.205c4.396,0,8.639,1.806,11.681,4.96
		c3.432-0.699,6.697-1.96,9.715-3.75c0.139-0.082,0.312-0.069,0.438,0.03c0.125,0.101,0.176,0.268,0.126,0.421
		c-1.021,3.199-3.018,5.989-5.696,8.004c2.523-0.439,4.974-1.182,7.302-2.214c0.157-0.072,0.342-0.027,0.453,0.104
		C85.959,22.97,85.971,23.158,85.874,23.302z"/>
</g>

</svg>

						<span class="txt">AvenirZheng</span>
					</a>
				</dd>
				
				<dt>aboutme</dt>
				<dd>
					<a href="https://about.me/avenirzheng" target="_blank" title="Aboutme" class="aboutme">
						<svg aria-hidden="true" viewBox="0 0 94 94">
<g>
	<path d="M88.359,94.25H5.891C2.637,94.25,0,91.613,0,88.359V5.891C0,2.637,2.637,0,5.891,0h82.469c3.253,0,5.891,2.637,5.891,5.891
	v82.469C94.25,91.613,91.613,94.25,88.359,94.25z M49.342,57.362c0,0,0-9.818,0-15.059c0-4.719-2.401-7.164-6.506-7.164
	c-3.41,0-5.769,2.009-7.033,3.843c-0.919-2.576-2.97-3.843-5.984-3.843c-3.406,0-5.591,1.92-6.552,3.057v-2.783h-5.68v21.948h5.68
	V42.303c0.83-1.007,2.186-2.403,4.151-2.403c2.183,0,3.188,1.354,3.188,3.71c0,2.797,0,13.752,0,13.752h5.677c0,0,0-9.818,0-15.059
	c0.874-1.007,2.185-2.403,4.149-2.403c2.185,0,3.231,1.354,3.231,3.71c0,2.797,0,13.752,0,13.752H49.342z M75.594,48.11v-1.834
	c0-6.333-4.632-11.137-10.876-11.137c-6.468,0-11.051,5.022-11.051,11.137c0,6.552,4.981,11.137,11.356,11.137
	c2.62,0,6.465-0.741,9.038-3.448l-2.835-3.278c-1.487,1.531-4.019,2.184-5.767,2.184c-3.232,0-5.546-1.966-6.116-4.761H75.594z
	 M70.395,44.486H59.26c0.39-2.664,2.225-5.111,5.546-5.111C68.3,39.375,70.089,41.951,70.395,44.486z"/>
</g>

</svg>

						<span class="txt">AvenirZheng</span>
					</a>
				</dd>
				<dt>blog</dt>
				<dd>
					<a href="http://caib.me" target="_blank" title="Blog" class="blog">
						<svg aria-hidden="true" viewBox="0 0 17.561 17.561">
<g>
	<path  d="M16.486,0H1.076C0.481,0,0,0.481,0,1.075v15.412c0,0.593,0.481,1.074,1.076,1.074h15.41
		c0.594,0,1.075-0.481,1.075-1.074V1.075C17.561,0.482,17.08,0,16.486,0z M5.158,14.488c-1,0-1.811-0.811-1.811-1.813
		c0-1,0.811-1.811,1.811-1.811s1.813,0.811,1.813,1.811C6.971,13.678,6.158,14.488,5.158,14.488z M11.299,13.279
		c0,0.3-0.118,0.581-0.331,0.794c-0.212,0.211-0.496,0.329-0.798,0.329c-0.622,0-1.126-0.505-1.126-1.123L9.033,12.65
		c0-2.012-1.635-3.647-3.647-3.647H4.502c-0.625,0-1.134-0.509-1.134-1.137s0.509-1.138,1.134-1.138h0.512h0.372
		c3.162,0,5.758,2.476,5.907,5.638c0.003,0.022,0.007,0.039,0.007,0.06l0.003,0.11c0.003,0.038,0.005,0.075,0.005,0.114
		L11.299,13.279z M15.074,12.71c0,0.003,0,0.005,0,0.008v0.532c0,0.569-0.465,1.031-1.038,1.031s-1.038-0.462-1.038-1.031v-0.759
		c-0.117-4.143-3.483-7.484-7.639-7.557c-0.006,0-0.013,0.002-0.02,0.002h-0.96c-0.57,0-1.031-0.464-1.031-1.037
		c0-0.574,0.461-1.038,1.031-1.038H5.34c0.025,0,0.047,0.006,0.071,0.007c5.129,0.098,9.311,4.133,9.64,9.204
		c0.016,0.071,0.023,0.141,0.023,0.217C15.074,12.289,15.074,12.71,15.074,12.71z"/>
</g>

</svg>

						<span class="txt">caib.me</span>
					</a>
				</dd>
				<dt>linkedin</dt>
				<dd>
					<a href="http://www.linkedin.com/pub/avenir-zheng/25/285/3b4" target="_blank" title="Linkedin" class="linkedin">
						<svg aria-hidden="true" viewBox="0 0 94 94">
<g>
	<path d="M89,0H5C2.239,0,0,2.239,0,5v84c0,2.761,2.239,5,5,5h84c2.762,0,5-2.239,5-5V5C94,2.239,91.762,0,89,0z M26.414,84.201
		H10.966V34.503h15.447L26.414,84.201L26.414,84.201z M18.693,27.71c-4.951,0-8.959-4.013-8.959-8.958
		c0.001-4.938,4.01-8.952,8.959-8.952c4.939,0,8.951,4.012,8.951,8.952C27.644,23.697,23.632,27.71,18.693,27.71z M84.266,84.2
		H68.832V60.033c0-5.764-0.105-13.178-8.029-13.178c-8.033,0-9.268,6.278-9.268,12.759V84.2H36.099V34.503h14.816v6.79h0.207
		c2.063-3.907,7.103-8.027,14.614-8.027c15.641,0,18.529,10.294,18.529,23.673V84.2L84.266,84.2z"/>
</g>

</svg>

						<span class="txt">Avenir Zheng</span>
					</a>
				</dd>
			</dl>
		</nav>
	</section>
	
	<aside class="hamburger">
		<button class="menu-burger"><span></span></button>
	</aside>
	
	
	<section class="container">
		<div class="loading">
			<svg viewbox="0 0 40 40">
				<polygon points="0 0 0 40 40 40 40 0" class="rect" />
			</svg>
		</div> 
		<div class="bg" id="ascii-background"></div>
		<div class="bg" id="video-background" style="display: none;">
			<video autoplay loop webkit-playsinline preload="auto"  id="video-rock">
				<source src="#" type="video/mp4" />Your browser does not support the video tag. I suggest you upgrade your browser.
			</video>
		</div>
	</section>
   
    <footer class="footer">
		<p class="copyright">Copyright © 2016 <a href="http://avenirzheng.net" data-text="Avenir" class="link">avenirzheng</a>.</p>
		<p class="thanks">Background rock by <a  href="http://codeology.braintreepayments.com/" target="_blank" class="link">codeology</a>. Icon designed by <a href="http://www.freepik.com/" target="_blank" class="link">Freepik</a></p>
	</footer>
	<div class="qrchode" id="WeChatQRCode" style="display: none;">
		 <img src="assets/qrcode/avenir.svg" alt="wechat:avenir" />
		 
	 </div>
	 
	<script>
		var $ = document.querySelectorAll.bind(document);
		
		function toggleClass(el,className){
			var hasClass, addClass, removeClass;

			if ('classList' in document.documentElement) {
			    hasClass = function (el, className) { return el.classList.contains(className); };
			    addClass = function (el, className) { el.classList.add(className); };
			    removeClass = function (el, className) { el.classList.remove(className); };
			} else {
			    hasClass = function (el, className) {
			        return new RegExp('\\b'+ className+'\\b').test(el.className);
			    };
			    addClass = function (el, className) {
			        if (!hasClass(el, className)) { el.className += ' ' + className; }
			    };
			    removeClass = function (el, className) {
			        el.className = el.className.replace(new RegExp('\\b'+ className+'\\b', 'g'), '');
			    };
			}
			if (!hasClass(el, className)) {
				addClass(el, className);
			} else{
				removeClass(el, className)
			};
		}
		
		(function (x) {
		  var i;
		  if (!x.matchesSelector) {
		    for (i in x) {
		      if (/^\S+MatchesSelector$/.test(i)) {
		        x.matchesSelector = x[i];
		        break;
		      }
		    }
		  }
		}(Element.prototype));
		
		Document.prototype.on =
		Element.prototype.on = function (eventType, selector, handler) {
		  this.addEventListener(eventType, function listener(event) {
		    var t = event.target,
		      type = event.type,
		      x = [];
		    if (event.detail && event.detail.selector === selector && event.detail.handler === handler) {
		      return this.removeEventListener(type, listener, true);
		    }
		    while (t) {
		      if (t.matchesSelector && t.matchesSelector(selector)) {
		        t.addEventListener(type, handler, false);
		        x.push(t);
		      }
		      t = t.parentNode;
		    }
		    setTimeout(function () {
		      var i = x.length - 1;
		      while (i >= 0) {
		        x[i].removeEventListener(type, handler, false);
		        i -= 1;
		      }
		    }, 0);
		  }, true);
		};
		
		Document.prototype.off =
		Element.prototype.off = function (eventType, selector, handler) {
		  var event = document.createEvent('CustomEvent');
		  event.initCustomEvent(eventType, false, false, {selector: selector, handler: handler});
		  this.dispatchEvent(event);
		};
		
		function toggleInfo(){
			
			toggleClass($(".menu-burger")[0], 'menu-burger-open')
			toggleClass($("body")[0], 'page-open')
			
		}
		
		document.on('click', '.page-open .bg,.page-open .loading,.menu-burger', function () {
		  toggleInfo() 
		  return false;
		});
		
		
		
		document.on('click', '.wechat', function () {
		  $(".qrchode")[0].style.display = 'block';
		  return false;
		});
		
		document.on("click", ".qrchode", function(){
		   $(".qrchode")[0].style.display = 'none';
		  return false;
		});
		
	</script>
	
	
    <!-- original shader by https://github.com/pnitsch -->
    <script type="x-shader/x-vertex" id="vertexShader">
        varying vec2 vUv;

        void main() {
            vUv = uv; 
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
    </script>

    <script type="x-shader/x-vertex" id="fragmentShader">
        varying vec2 vUv;

        uniform float mode;
        uniform float rx;
        uniform float ry; 
        uniform float charMapSize;
        uniform float numChars;
        uniform sampler2D inputTexture;
        uniform sampler2D asciiTexture;
        uniform sampler2D hashTexture;
        uniform vec2 fontSize;
        vec2 imageSize = vec2(500.0, 500.0);
        vec2 canvasSize = vec2(500.0, 500.0);   

        const float contrast = 0.0;
        const float colorDepth = 255.0/16.0;
        const vec2 hashSize = vec2(256.0, 256.0);

        vec4 pix = vec4(0.0, 0.0, 0.0, 0.0);
        vec4 key = vec4(0.0, 0.0, 0.0, 0.0);

        float h_fs_x, h_fs_y;

        float packColor(vec4 color) {   
            return (color.r + (color.g*256.0) + (color.b*256.0*256.0) + (color.a*256.0*256.0*256.0));
        }

        vec4 contrastPix(float _x, float _y) {
            float factor = (259.0 * (contrast + 255.0)) / (255.0 * (259.0 - contrast));
            vec4 p = texture2D(inputTexture, vec2(_x, _y));
            p.r = (factor * ((p.r*255.0) - 128.0) + 128.0)/255.0;
            p.g = (factor * ((p.g*255.0) - 128.0) + 128.0)/255.0;
            p.b = (factor * ((p.b*255.0) - 128.0) + 128.0)/255.0;
            p.a = 1.0;

            return p;
        }

        void sampleRegion(float x, float y) {
            vec4 c1, c2, c3, c4;

            c1 = contrastPix(x, y);
            key.r += (c1.r + c1.g + c1.b)/3.0;

            c2 = contrastPix(x+h_fs_x, y);
            key.g += (c2.r + c2.g + c2.b)/3.0;  

            c3 = contrastPix(x, y+h_fs_y);
            key.b += (c3.r + c3.g + c3.b)/3.0;

            c4 = contrastPix(x+h_fs_x, y+h_fs_y);
            key.a += (c4.r + c4.g + c4.b)/3.0;

            c1.r = (floor((c1.r*255.0)/colorDepth)*colorDepth)/255.0;
            c1.g = (floor((c1.g*255.0)/colorDepth)*colorDepth)/255.0;
            c1.b = (floor((c1.b*255.0)/colorDepth)*colorDepth)/255.0;
            pix.rgb += c1.rgb;
        }

        void analyseQuads(vec2 _offset) {
            h_fs_x = (fontSize.x*0.5)/imageSize.x;
            h_fs_y = (fontSize.y*0.5)/imageSize.y;

            float increment = 1.0/imageSize.y;
            float y=_offset.y;
            float x=_offset.x;

            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            x=_offset.x; y+=increment;

            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            x=_offset.x; y+=increment;

            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            x=_offset.x; y+=increment;

            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            sampleRegion(x, y); x+=increment;
            x=_offset.x; y+=increment;

            pix /= 16.0;
            key = floor(key)/16.0;
        }

        void main(void) {

            imageSize.x = rx;
            canvasSize.x = rx;
            imageSize.y = ry;
            canvasSize.y = ry;

            ivec2 ioffset = ivec2(gl_FragCoord.xy/fontSize.xy);
            ioffset *= ivec2(fontSize.xy);
            vec2 offset = vec2(ioffset);
            offset /= canvasSize;

            analyseQuads(offset);
            float index = packColor( key )/256.0;
            float hash_x = mod(index, hashSize.x); 
            float hash_y = (index-hash_x)/hashSize.x;

            vec4 char_pix = texture2D(hashTexture, vec2(hash_x/256.0, hash_y/256.0));
            float ch = floor((char_pix.g)*255.0);

            vec2 pos = mod(gl_FragCoord.xy, fontSize.xy);
            pos = pos / vec2(fontSize.x*numChars, fontSize.y);
            pos.x += ((floor(ch)*fontSize.x)/charMapSize);
            pos.y = 1.0 - pos.y;

            vec4 ascii_pix = vec4(texture2D(asciiTexture, pos).rgb, 1.0);


            if(ascii_pix.r > 0.0 || mode!=6.0) {
                if(mode==5.0) ascii_pix.rgb = pix.rgb;
                else if(mode==1.0) ascii_pix.rgb = vec3(pix.g*0.1*ascii_pix.r, pix.g*ascii_pix.g, pix.g*0.1*ascii_pix.b);
                else if(mode==2.0) ascii_pix.rgb = vec3(1.0-ascii_pix.r,1.0-ascii_pix.g,1.0-ascii_pix.b);
                else if(mode==3.0) ascii_pix.rgb = vec3(1.0-pix.r*ascii_pix.r,1.0-pix.g*ascii_pix.g,1.0-pix.b*ascii_pix.b);
                else if(mode==4.0) ascii_pix.rgb = vec3(1.0-char_pix.g*ascii_pix.r, 1.0-char_pix.g*ascii_pix.g, 1.0-char_pix.g*ascii_pix.b);
                else if(mode==7.0) ascii_pix.rgb = vec3(pix.g*50.0/255.0*ascii_pix.r, pix.g*161.0/255.0*ascii_pix.g, pix.g*199.0/255.0*ascii_pix.b);
                else if(mode==8.0) ascii_pix.rgb = vec3(pix.r*ascii_pix.r, pix.g*ascii_pix.g*offset.x, pix.b*ascii_pix.b*offset.y);
                else if(mode==9.0) ascii_pix.rgb = vec3(1.0-pix.r*ascii_pix.r*offset.x, 1.0-pix.g*ascii_pix.g*offset.x, 1.0-pix.b*ascii_pix.b*offset.y);
                else if(mode==0.0) ascii_pix.rgb = vec3(pix.r*ascii_pix.r, pix.g*ascii_pix.g,pix.b*ascii_pix.b);
            } 

            gl_FragColor = ascii_pix;
        }
    </script>
    
    <script src="assets/js/vendor.js"></script>
    <script src="assets/js/app.js"></script>
</body>

</html>
